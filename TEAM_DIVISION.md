# 北航课程伴侣 - 三人分工方案（精简版）

## 项目当前状态分析

### ✅ 已实现功能
1. **数据库设计**：Room数据库 + MySQL schema（所有表结构）
2. **课程表管理**：手动添加、编辑、删除、按天筛选查看
3. **任务管理**：创建/编辑任务、状态跟踪、优先级设置、基础提醒
4. **学习小组**：创建小组、基础展示、成员管理（基础）
5. **UI框架**：导航系统、主题配置、基础UI组件
6. **通知系统**：基础提醒功能框架

### ❌ 待实现功能（排除第五、六部分和AI功能）
- 用户认证系统（登录/注册）
- 课程导入（Excel/CSV、教务系统）
- 多种视图（日/周/学期视图）
- 课程详情卡片、地点导航
- 任务进度条、多次提醒策略
- 小组功能完善（发现页、邀请码、公告板、群聊、文件库、小组任务）
- 通知系统优化

### ⏸️ 暂不涉及功能
- ~~AI功能（笔记助手、作业辅导、智能日程规划）~~
- ~~学习数据分析与报告~~
- ~~课程评价社区~~
- ~~空教室查询~~
- ~~成绩管理~~
- ~~云端同步~~

---

## 三人分工方案

### 👤 成员A：用户系统 + 课程表增强 + 数据导入

**职责范围：** 用户认证、课程表功能增强、数据导入

#### 第一阶段任务（MVP）

1. **用户认证系统** ⭐⭐⭐
   - 登录/注册界面（LoginScreen.kt, RegisterScreen.kt）
   - 用户状态管理（UserSession/UserManager）
   - 密码加密存储（使用Android Keystore或BCrypt）
   - 会话管理（SharedPreferences + Room）
   - 修改现有代码，将硬编码的 `userId = 1` 改为从登录状态获取
   - **数据库**：UserDao.kt（需要创建）

2. **课程表导入功能** ⭐⭐⭐
   - Excel文件解析（使用Apache POI或jxl库）
   - CSV文件解析
   - 标准模板生成（提供Excel模板下载）
   - 批量导入界面（ImportCourseScreen.kt）
   - 数据验证与错误处理
   - **数据库**：可能需要添加导入历史记录表

3. **课程表视图增强** ⭐⭐
   - 周视图实现（WeekViewScreen.kt）
     - 时间轴（8:00-22:00）
     - 课程格子显示（时间、地点、课程名）
     - 课程冲突检测
   - 学期视图（SemesterViewScreen.kt）
     - 按周数筛选显示
     - 非上课周自动隐藏
   - 课程详情卡片（CourseDetailDialog.kt）
     - 显示完整课程信息
     - 关联作业列表
     - 地点导航按钮

4. **地点导航功能** ⭐
   - 调用地图APP（高德/百度地图Intent）
   - 地点解析与坐标获取

#### 技术栈
- Android Jetpack Compose
- Room Database
- Apache POI / CSV解析库
- Android Keystore / 加密库
- Intent调用第三方地图APP

---

### 👤 成员B：任务管理增强 + 学习小组完善 + 通知系统

**职责范围：** 任务管理功能增强、学习小组功能完善、通知系统优化

#### 第一阶段任务（MVP）

1. **任务管理增强** ⭐⭐
   - 任务关联课程（下拉选择课程）
   - 任务进度条（ProgressBar组件）
   - 多次提醒策略
     - 首次提醒（提前3天）
     - 紧急提醒（提前1天）
     - 提醒配置界面
   - 任务完成确认与激励（简单的完成动画/提示）
   - **数据库**：Assignment表已存在，可能需要添加提醒记录表

2. **学习小组功能完善** ⭐⭐⭐
   - 小组发现页（GroupDiscoveryScreen.kt）
     - 搜索功能
     - 按课程/主题筛选
     - 申请加入功能
     - 小组卡片展示（成员数、描述等）
   - 邀请机制
     - 邀请码生成
     - 二维码生成（使用ZXing库）
     - 邀请链接分享
     - 邀请历史记录
   - 小组公告板（AnnouncementScreen.kt）
     - 组长发布公告
     - 公告列表展示
     - 公告编辑/删除（权限控制）
   - 群聊功能（GroupChatScreen.kt）
     - 消息列表（使用LazyColumn）
     - 发送文字消息
     - 发送图片（图片选择器）
     - 消息时间显示
     - 消息发送状态（发送中、已发送、失败）
   - **数据库**：GroupMessage表已存在，需要完善GroupMessageDao和Repository

#### 技术栈
- Android Jetpack Compose
- Room Database
- WorkManager（提醒调度）
- ZXing（二维码生成）
- 图片选择器（PhotoPicker API）
- 文件存储（MediaStore API）

---

### 👤 成员C：小组文件库 + 小组任务 + 通知系统优化 + 多次提醒

**职责范围：** 小组文件管理、小组任务管理、通知系统优化、多次提醒策略

#### 第一阶段任务（MVP）

1. **通知系统优化** ⭐⭐
   - 多次提醒的WorkManager调度
   - 通知分类（课程提醒、作业提醒、小组消息）
   - 通知中心（NotificationCenterScreen.kt）
   - 通知已读/未读状态管理
   - 通知设置界面（允许用户自定义通知偏好）
   - **数据库**：Notification表已存在，需要完善NotificationDao

2. **多次提醒策略** ⭐⭐
   - 首次提醒（提前3天）
   - 紧急提醒（提前1天）
   - 提醒配置界面（ReminderSettingsScreen.kt）
   - WorkManager任务调度优化
   - 提醒记录与日志
   - **数据库**：可能需要创建ReminderLog表

#### 第二阶段任务

3. **小组共享文件库** ⭐⭐⭐
   - 文件上传功能（图片、PDF、文档）
     - 文件选择器（使用PhotoPicker API或文件选择器）
     - 文件上传进度显示
     - 文件大小限制与验证
   - 文件列表展示（FileListScreen.kt）
     - 按类型分类（图片、文档、其他）
     - 按时间排序
     - 文件搜索功能
   - 文件下载功能
   - 文件删除（权限控制：仅上传者或组长可删除）
   - 文件预览（图片预览、PDF预览）
   - **数据库**：需要创建GroupFile表

4. **小组任务管理** ⭐⭐⭐
   - 创建小组任务（GroupTaskScreen.kt）
     - 任务标题、描述
     - 截止时间
     - 分配给组员（多选）
   - 任务列表展示
     - 看板视图（待开始、进行中、已完成）
     - 列表视图
   - 任务进度跟踪
     - 任务状态更新
     - 进度百分比显示
   - 任务详情页
     - 显示任务信息
     - 显示分配给的组员
     - 任务完成确认
   - 权限控制（组长可创建、分配、删除任务）
   - **数据库**：需要创建GroupTask表和GroupTaskAssignment表

#### 技术栈
- Android Jetpack Compose
- Room Database
- WorkManager（提醒调度）
- 文件选择器（PhotoPicker API / 文件选择器）
- 文件存储（MediaStore API / 内部存储）
- 文件预览（图片预览、PDF预览库）
- 权限管理（存储权限）

---

## 数据库分工

### 成员A负责的表
- `users` - 用户表（需要创建UserDao）
- `import_history` - 导入历史表（可选，新建）
- 可能需要扩展`courses`表（添加导入来源字段）

### 成员B负责的表
- `group_messages` - 小组消息表（已存在，需要完善）
- `group_members` - 小组成员表（已存在，需要完善）

### 成员C负责的表
- `notifications` - 通知表（已存在，需要完善NotificationDao）
- `reminder_logs` - 提醒记录表（可选，新建）
- `group_files` - 小组文件表（新建）
- `group_tasks` - 小组任务表（新建）
- `group_task_assignments` - 小组任务分配表（新建，关联任务和成员）

---

## 协作与依赖关系

### 关键依赖
1. **成员A必须先完成用户认证系统**，其他成员才能将硬编码的`userId = 1`改为从登录状态获取
2. **成员B的小组功能**可能需要成员A的用户系统支持（邀请好友功能）
3. **成员C的AI功能**可能需要成员B的任务数据（智能日程规划）
4. **所有成员**需要统一API接口规范（如果使用后端）

### 代码规范
- 统一使用Kotlin + Jetpack Compose
- 统一使用Room数据库
- 统一使用Material Design 3组件
- 统一代码风格（遵循Kotlin官方编码规范）
- 使用Git进行版本控制，建立分支管理策略

### 接口约定
- 用户ID获取：`UserSession.currentUserId`
- 数据库访问：通过Repository层，不直接访问DAO
- API调用：统一使用Retrofit + Coroutines
- 错误处理：统一使用Result封装


## 注意事项

1. **数据库迁移**：如果修改表结构，需要更新Room数据库版本和Migration
2. **API密钥**：AI功能需要API密钥，建议使用环境变量或配置文件（不要提交到Git）
3. **测试**：每个功能完成后进行单元测试和UI测试
4. **文档**：重要功能需要添加代码注释和README说明
5. **性能优化**：注意大数据量时的性能问题（如课程表周视图、消息列表）

### 开发建议
- 成员A和成员B可以并行开发（依赖关系较少）
- 成员C的小组功能需要等待成员B完成小组发现页和群聊基础功能
- 通知系统优化可以独立开发，与其他功能并行


